CFLAGS = -g -Wall -DDEBUG -DDEBUG_LEVEL=3
PKGCONFIG = pkg-config
SOAP_CFLAGS = `$(PKGCONFIG) gsoap --cflags`
SOAP_LDFLAGS = `$(PKGCONFIG) gsoap --libs`
LDFLAGS = $(SOAP_LDFLAGS) -lpthread
CPPFLAGS = $(SOAP_CFLAGS)
OBJ = stdsoap2.o dom.o StubC.o tools.o messages.o Manager.o Fault.o FileConf.o ACSInterface.o cwmp.o
EXE = cwmp
CC = gcc 

all: $(OBJ) $(EXE)

$(EXE): $(OBJ)
	$(CC) $(LDFLAGS) -o $@ $^
%.o: %.c
	$(CC) $(CFLAGS) $(CPPFLAGS) -c -o $@ $< 


clean:
	-rm -f $(OBJ) $(EXE)
